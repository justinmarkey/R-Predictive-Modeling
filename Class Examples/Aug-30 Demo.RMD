---
title: "Class Demo 20210830"
output: word_document
---

Following last class demonstration, now we examine the relationship between two variables, and the focus is the pattern of the relationship, not the distribution of each variable.

```{r}
prof.data<-read.csv("professor.csv")
```


## 1) Y: Numeric, X: Numeric (small data)
Let y be salary, x be Exper
We can use scatterplot to illustration the relationship.

Let's first produce a basic scatterplot:
```{r}
with(prof.data,
     plot(y=Salary,x=Exper))
```

Now, use a more advanced scatterplot, you need to use car package:
```{r}
library(car)
scatterplot(data=prof.data,
            Salary~Exper)
```

Let's explore more about conditional scatterplot. Examine the relationship across different gender.
```{r}
scatterplot(data=prof.data,
            Salary~Exper|Gender)
```

## 2) Y: Numeric, X: Categorical
Let Y be Salary, X be gender.
We can use the boxplot by categories to show the relationship.
```{r}
with(prof.data,
     plot(y=Salary,x=as.factor(Gender)))
with(prof.data,
     plot(Salary~as.factor(Gender)))

```

## 3) Y: Numeric, X: Numeric (Really Large Dataset)
Still examine the case of Salary ~ Exper
We need to change Exper into Rank of Exper, so it becomes the second case. Y(Numeric) vs. X(Categorical)

```{r}
library(dplyr)
prof.data$Exper_Rank<-factor(with(prof.data,ntile(Exper,4)))
with(prof.data,plot(Salary~Exper_Rank))
```

## 4) Y: Categorical, X: Categorical 

A mosiacplot is suitable for this situation. I would like to define a new categorical variable High_Salary, which is equal to 1 if salary is greater than 85, otherwise it is 0.

```{r}
prof.data$High_Salary<-factor(with(prof.data,
                            ifelse(Salary>85,1,0)))
```

We can examine this High_Salary(Categorical) variable vs. Gender (Categorical).
1) First, produce contingency table.
```{r}
contingency.table<-with(prof.data,table(Gender,High_Salary))
contingency.table
```

2) Second, use contingency table to produce mosaicplot
```{r}
mosaicplot(contingency.table)
```

## 5) Y: Categorical, X: Numeric
In this case, we should change x into categorical data (ranks), then the situation becomes categorical vs. categorical.

Let's examine the relationship between High_Salary and Exper. We need to change Exper into Exper_Rank, (which is done before).

Therefore, the relationship can be assessed as below:
```{r}
contingency.table2<-with(prof.data,table(Exper_Rank,High_Salary))
mosaicplot(contingency.table2)
```

